<!doctype html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Horticalc GUI</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="page-header">
      <h1>Horticalc – Düngercalculator</h1>
      <div class="api-config">
        <label for="apiBase">API Base URL</label>
        <input id="apiBase" type="url" value="http://localhost:8000" />
        <button id="reloadData">Dünger laden</button>
      </div>
    </header>

    <main>
      <section class="block">
        <h2>1) Vorauswahl der Düngerkomponenten</h2>
        <p class="hint">Wähle Dünger aus der Datenbank, das Plus fügt weitere Zeilen hinzu.</p>
        <div class="actions inline-actions">
          <button id="addFertilizerRow" type="button">+</button>
        </div>
        <div class="table-wrap">
          <table class="grid" id="fertilizerSelectTable">
            <thead>
              <tr>
                <th class="col-index">#</th>
                <th class="col-name">Dünger (Dropdown)</th>
                <th class="col-form">Form</th>
                <th class="col-weight">Gewicht</th>
              </tr>
            </thead>
            <tbody>
              <!-- rows inserted by JS -->
            </tbody>
          </table>
        </div>
      </section>

      <section class="block">
        <h2>2) Düngercalculator</h2>
        <p class="hint">Mengen eingeben und Berechnung starten.</p>
        <div class="table-wrap">
          <table class="grid" id="calculatorTable">
            <thead>
              <tr>
                <th class="col-index">#</th>
                <th class="col-name">Düngername</th>
                <th class="col-amount">Menge (g)</th>
              </tr>
            </thead>
            <tbody>
              <!-- rows inserted by JS -->
            </tbody>
          </table>
        </div>
        <div class="actions">
          <button id="calculateBtn">Berechnen</button>
        </div>
        <div class="summary">
          <h3>Zentraler Wert: Nährstoffm. Dünger + Wasser (ppm, mg/l)</h3>
          <div class="table-wrap">
            <table class="grid" id="ppmTable">
              <thead>
                <tr id="ppmHeaderRow"></tr>
              </thead>
              <tbody>
                <tr id="ppmValueRow"></tr>
              </tbody>
            </table>
          </div>
        </div>
      </section>

      <section class="block">
        <h2>3) Einzelne Ionen (mg/l)</h2>
        <p class="hint">Aufschlüsselung nach Ionen &amp; N-Formen.</p>
        <div class="table-wrap">
          <table class="grid" id="nFormTable">
            <thead>
              <tr>
                <th class="col-label">N Herkunft</th>
                <th class="col-wide">Werte (NH4/NO3/Urea/Wasser)</th>
                <th class="col-amount">Summe N</th>
              </tr>
            </thead>
            <tbody>
              <tr id="nFormRow"></tr>
            </tbody>
          </table>
        </div>
        <div class="table-wrap">
          <table class="grid" id="ionMmolTable">
            <thead>
              <tr id="ionMmolHeaderRow"></tr>
            </thead>
            <tbody>
              <tr id="ionMmolValueRow"></tr>
            </tbody>
          </table>
        </div>
        <div class="table-wrap">
          <table class="grid" id="ionMeqTable">
            <thead>
              <tr id="ionMeqHeaderRow"></tr>
            </thead>
            <tbody>
              <tr id="ionMeqValueRow"></tr>
            </tbody>
          </table>
        </div>
        <div class="table-wrap">
          <table class="grid" id="ionBalanceTable">
            <thead>
              <tr id="ionBalanceHeaderRow"></tr>
            </thead>
            <tbody>
              <tr id="ionBalanceValueRow"></tr>
            </tbody>
          </table>
        </div>
      </section>

      <section class="block">
        <h2>EC (späterer Schritt)</h2>
        <p class="hint">Dieser Bereich ist vorbereitet, die EC-Logik folgt später.</p>
        <div class="placeholder">EC-Block (Placeholder)</div>
      </section>
    </main>

    <script src="app.js"></script>
  </body>
</html>
